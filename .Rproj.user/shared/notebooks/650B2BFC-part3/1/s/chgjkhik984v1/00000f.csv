"0",""
"0","failure_df <- main_df %>%"
"0","  filter(!is.na(Gender), !is.na(Age), !is.na(Participated), Participated > 0) %>%"
"0","  filter((Incomplete + Withdrawn) <= Participated) %>%"
"0","  mutate(failure_rate = (Incomplete + Withdrawn) / Participated) %>%"
"0","  group_by(Gender, Age) %>%"
"0","  summarise(mean_failure = mean(failure_rate, na.rm = TRUE), .groups = ""drop"")"
"0",""
"0","ggplot(failure_df, aes(x = Age, y = mean_failure, color = Gender)) +"
"0","  geom_line(size = 1.2) +"
"0","  geom_point(size = 2) +"
"0","  scale_y_continuous(labels = scales::percent_format(accuracy = 1), limits = c(0, 1)) +"
"0","  scale_color_manual(values = c(""Male"" = ""#1f77b4"", ""Female"" = ""#e15759"")) +"
"0","  labs("
"0","    title = ""Failure Rates by Age and Gender"","
"0","    x = ""Age"","
"0","    y = ""Average Failure Rate"""
"0","  ) +"
"0","  theme_minimal(base_size = 14) +"
"0","  theme("
"0","    plot.title = element_text(face = ""bold"", hjust = 0.5),"
"0","    legend.title = element_blank()"
"0","  )"
